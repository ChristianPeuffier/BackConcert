<mat-toolbar color="primary">
  <span class="menu-icon" (click)="toggleMenu()">☰</span>

  <!-- Logo & Nom du site -->
  <span class="logo">
    <a routerLink="/" class="logo-text">🎟️ Ticket Miagester</a>
  </span>
  <!-- Liens de navigation -->
  <span class="spacer"></span>
  <ul class="nav-links" [ngClass]="{ 'active': menuOpen }">
    <li><a routerLink="/">Accueil</a></li>
    <li><a routerLink="/utilisateurs/">Utilisateurs</a></li>
    <li><a routerLink="/evenement">Evénements</a></li>
    <li><a routerLink="/tickets">Mes Tickets</a></li>
  </ul>

  <span class="spacer"></span>

  <div class="search-container" [ngClass]="{ 'active': searchOpen }">
    <input type="text" placeholder="Rechercher..." [(ngModel)]="searchQuery" (input)="onSearch()" />
    <button (click)="toggleSearch()" class="loupe">
      <img ngSrc="assets/search-icon.png" alt="Rechercher" height="20" width="20" class="loupe"/>
    </button>
  </div>

  <!-- Menu utilisateur -->
  <ng-container *ngIf="authService.isLoggedIn(); else loginButton">
    <button mat-button [matMenuTriggerFor]="menu">{{ userFirstName }}</button>
    <mat-menu #menu="matMenu">
      <button mat-menu-item routerLink="/dashboard"><mat-icon>dashboard</mat-icon>Dashboard</button>
      <button mat-menu-item (click)="authService.logout()"><mat-icon>logout</mat-icon>Déconnexion</button>
    </mat-menu>
  </ng-container>

  <!-- Bouton de connexion si non connecté -->
  <ng-template #loginButton>
    <button mat-button (click)="openLoginDialog()" class="mat-button login-button">
      <mat-icon>person</mat-icon>
      <span class="login-text">Se connecter</span>
    </button>
  </ng-template>

</mat-toolbar>

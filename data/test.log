/*C22*/SET SCHEMA PUBLIC
DELETE FROM TICKET WHERE ID=702
DELETE FROM TICKET WHERE ID=752
DELETE FROM TICKET WHERE ID=802
DELETE FROM TICKET WHERE ID=852
DELETE FROM TICKET WHERE ID=902
DELETE FROM TICKET WHERE ID=952
DELETE FROM TICKET WHERE ID=1002
DELETE FROM TICKET WHERE ID=1052
DELETE FROM TICKET WHERE ID=1053
DELETE FROM TICKET WHERE ID=1102
COMMIT
DELETE FROM EVENEMENT WHERE ID=1352
DELETE FROM EVENEMENT WHERE ID=1402
DELETE FROM EVENEMENT WHERE ID=1452
DELETE FROM EVENEMENT WHERE ID=1453
COMMIT
/*C23*/SET SCHEMA PUBLIC
DISCONNECT
/*C24*/SET SCHEMA PUBLIC
DISCONNECT
/*C25*/SET SCHEMA PUBLIC
DISCONNECT
/*C22*/drop table stats
drop table ticket
drop table evenement
/*C26*/SET SCHEMA PUBLIC
create table evenement (date date, id integer not null, nbMax integer, nbSold integer, price float(53), organisateur_id bigint, artiste varchar(100), genre varchar(100), nom varchar(100), description varchar(1000), lieu varchar(255), primary key (id))
create table Stats (evenement_id integer, id integer not null, primary key (id))
create table ticket (dateAchat date, evenement_id integer, id integer not null, prix float(53), utilisateur_id bigint, statut varchar(100) check (statut in ('ACHETE','ANNULE','REMBOURSE','RESERVE')), primary key (id))
alter table evenement add constraint FKjh9v630rxbsdflex9ij94rjai foreign key (organisateur_id) references utilisateur
alter table Stats add constraint FKnx30p674yasit6i7549ejsuqf foreign key (evenement_id) references evenement
alter table ticket add constraint FK4l049kq87r4dhky2rijk4r0f5 foreign key (evenement_id) references evenement
alter table ticket add constraint FKr6p65raty6l8vrfssxrdolnee foreign key (utilisateur_id) references utilisateur
DISCONNECT
/*C27*/SET SCHEMA PUBLIC
INSERT INTO EVENEMENT VALUES('2025-04-09',1502,5,5,30.0E0,NULL,'gims','Pop','test','fjnfijenrfniernf','rennes')
ALTER SEQUENCE PUBLIC.EVENEMENT_SEQ RESTART WITH 1601
COMMIT
INSERT INTO TICKET VALUES('2025-04-08',1502,1152,30.0E0,652,'ACHETE')
ALTER SEQUENCE PUBLIC.TICKET_SEQ RESTART WITH 1251
COMMIT
DELETE FROM EVENEMENT WHERE ID=1502
INSERT INTO EVENEMENT VALUES(NULL,1502,0,-1,0.0E0,NULL,NULL,NULL,NULL,NULL,NULL)
COMMIT
DISCONNECT
